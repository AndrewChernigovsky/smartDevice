"use strict";const footerNav=document.querySelector(".footer__nav"),footerContacts=document.querySelector(".footer__contacts"),btnContactsFooter=document.getElementById("footerBtnContacts"),btnNavFooter=document.getElementById("footerBtnNav"),btnPopup=(footerNav.classList.remove("footer__nav--nojs"),footerContacts.classList.remove("footer__contacts--nojs"),btnNavFooter.addEventListener("click",()=>{footerContacts.classList.remove("footer__contacts--opened"),footerContacts.classList.add("footer__contacts--closed"),footerNav.classList.contains("footer__nav--closed")?(footerNav.classList.add("footer__nav--opened"),footerNav.classList.remove("footer__nav--closed")):footerContacts.classList.contains("footer__contacts--opened")?(footerContacts.classList.remove("footer__contacts--opened"),footerContacts.classList.add("footer__contacts--closed")):(footerNav.classList.remove("footer__nav--opened"),footerNav.classList.add("footer__nav--closed"))}),btnContactsFooter.addEventListener("click",()=>{footerNav.classList.remove("footer__nav--opened"),footerNav.classList.add("footer__nav--closed"),footerContacts.classList.contains("footer__contacts--closed")?(footerContacts.classList.add("footer__contacts--opened"),footerContacts.classList.remove("footer__contacts--closed")):footerNav.classList.contains("footer__nav--opened")?(footerNav.classList.remove("footer__nav--opened"),footerNav.classList.add("footer__nav--closed")):(footerContacts.classList.remove("footer__contacts--opened"),footerContacts.classList.add("footer__contacts--closed"))}),document.getElementById("callUs")),overflow=document.getElementById("overflow"),popupName=document.getElementById("popname"),popupform=document.querySelector(".mainformPopup"),popupformbtn=document.querySelector(".btnPop"),body=document.querySelector(".page__body"),formPopup=document.querySelector(".main-formPopup"),formPopupName=document.getElementById("popname"),formPopupPhone=document.getElementById("popphone"),formPopupFaq=document.getElementById("popfaq"),form=document.getElementById("form"),formName=document.getElementById("name"),formPhone=document.getElementById("phone"),formFaq=document.getElementById("faq");function isValidPhone(e){return!/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e.value)}function isValidName(e){return!/^\D{1,3}[А-Яа-яA-Za-z0-9_-]{3,30}$/.test(e.value)}function isValidText(e){return!/^\D{1,3}[А-Яа-яA-Za-z0-9_-]{10,150}$/.test(e.value)}btnPopup.addEventListener("click",()=>{overflow.classList.add("overflow"),popupform.classList.add("mainformPopup-js"),body.style.overflowY="hidden",popupform.style.overflowY="scroll",formPopup.classList.add("scroll-form"),popupName.focus()}),overflow.addEventListener("click",()=>{popupform.classList.remove("mainformPopup-js"),overflow.classList.remove("overflow"),body.style.overflowY="scroll",popupform.style.overflowY="hidden"}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(popupform.classList.remove("mainformPopup-js"),overflow.classList.remove("overflow"),body.style.overflowY="scroll",popupform.style.overflowY="hidden")}),popupformbtn.addEventListener("click",()=>{popupform.classList.remove("mainformPopup-js"),overflow.classList.remove("overflow"),body.style.overflowY="scroll",popupform.style.overflowY="hidden"}),formPopupName.removeAttribute("required"),formPopupPhone.removeAttribute("required"),formName.removeAttribute("required"),formPhone.removeAttribute("required"),popupform.addEventListener("submit",function(e){isValidName(formPopupName)?(formPopupName.classList.add("error"),e.preventDefault()):(formPopupName.classList.remove("error"),formPopupName.classList.add("success"),localStorage.setItem("usernamePopup",formPopupName.value)),isValidPhone(formPopupPhone)?(formPopupPhone.classList.add("error"),e.preventDefault()):(formPopupPhone.classList.remove("error"),formPopupPhone.classList.add("success"),localStorage.setItem("phonePopup",formPopupPhone.value)),0==!formPopupFaq.value.length&&(isValidText(formPopupFaq)?(formPopupFaq.classList.add("error"),e.preventDefault()):(formPopupFaq.classList.remove("error"),formPopupFaq.classList.add("success"),localStorage.setItem("textPopup",formPopupFaq.value))),formPopupPhone.classList.contains("success")&&formPopupName.classList.contains("success")&&alert("Форма успешно отправлена")}),form.addEventListener("submit",function(e){isValidName(formName)?(formName.classList.add("error"),e.preventDefault()):(formName.classList.remove("error"),formName.classList.add("success"),localStorage.setItem("username",formName.value)),isValidPhone(formPhone)?(formPhone.classList.add("error"),e.preventDefault()):(formPhone.classList.remove("error"),formPhone.classList.add("success"),localStorage.setItem("phone",formPhone.value)),0==!formFaq.value.length&&(isValidText(formFaq)?(formFaq.classList.add("error"),e.preventDefault()):(formFaq.classList.remove("error"),formFaq.classList.add("success"),localStorage.setItem("text",formFaq.value))),formPhone.classList.contains("success")&&formName.classList.contains("success")&&alert("Форма успешно отправлена")}),window.addEventListener("DOMContentLoaded",function(){function e(e){var o="+7 (___) ___ ____",t=0,s=o.replace(/\D/g,""),r=this.value.replace(/\D/g,"");s.length>=r.length&&(r=s),this.value=o.replace(/./g,function(e){return/[_\d]/.test(e)&&t<r.length?r.charAt(t++):t>=r.length?"":e}),"blur"==e.type?2==this.value.length&&(this.value=""):(s=this.value.length,(o=this).focus(),o.setSelectionRange?o.setSelectionRange(s,s):o.createTextRange&&((o=o.createTextRange()).collapse(!0),o.moveEnd("character",s),o.moveStart("character",s),o.select()))}formPopupPhone.addEventListener("input",e,!1),formPopupPhone.addEventListener("focus",e,!1),formPopupPhone.addEventListener("blur",e,!1),formPhone.addEventListener("input",e,!1),formPhone.addEventListener("focus",e,!1),formPhone.addEventListener("blur",e,!1)});const anchors=document.querySelectorAll('a[href*="#"]');for(let o of anchors)o.addEventListener("click",function(e){e.preventDefault();e=o.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})});